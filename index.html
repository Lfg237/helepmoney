<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HelepMoney</title>
<style>
body{font-family:'Arial',sans-serif;background:linear-gradient(120deg,#f6d365,#fda085);margin:0;padding:0;}
.container{max-width:900px;margin:30px auto;padding:20px;background:rgba(255,255,255,0.95);border-radius:15px;box-shadow:0 8px 20px rgba(0,0,0,0.2);}
h1,h2,h3{color:#ff5722;text-align:center;}
b{font-weight:bold;}
.hidden{display:none;}
input,button,textarea{width:100%;padding:10px;margin:5px 0;border-radius:5px;border:2px solid #ff5722;}
button{background:#ff5722;color:white;font-weight:bold;cursor:pointer;border:none;}
table{width:100%;border-collapse:collapse;margin-top:20px;}
th,td{padding:8px;text-align:center;border:1px solid #ddd;}
th{background:#ff9800;color:white;}
tr:hover{background:#ffe0b2;cursor:pointer;}
ul{list-style:none;padding:0;}
li{padding:5px;background:#ffd54f;margin:3px 0;border-radius:5px;}

/* Bande annonce dÃ©filante */
#bandeTexte {
  display:inline-block;
  padding-left:100%;
  animation: defilement 70s linear infinite;
}
@keyframes defilement {
  0% { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}
</style>
</head>
<body>

<!-- Section Admin -->
<div class="container" id="adminSection">
<h1><b>HelepMoney - Administration</b></h1>
<label>Code Admin :</label>
<input type="password" id="adminCode">
<button id="accessBtn">AccÃ©der</button>
<p id="accessMsg"></p>
<table>
<thead>
<tr>
<th>Entreprise</th>
<th>PropriÃ©taire</th>
<th>NumÃ©ros</th>
<th>Lien abonnÃ©</th>
<th>Ã‰tat</th>
</tr>
</thead>
<tbody id="adminTable"></tbody>
</table>
</div>

<!-- Section Utilisateur -->
<div class="container hidden" id="userSection">
  <!-- Bande annonce horizontale -->
  <div id="bandeAnnonce" style="width:100%;overflow:hidden;background:#ff9800;color:white;padding:10px 0;font-weight:bold;white-space:nowrap;box-sizing:border-box;">
    <span id="bandeTexte">ğŸ’¥PROMOğŸ’° ğŸ“crÃ©ation de compte gratuit ğŸ˜³ durÃ©e de la promo une semaine â°â€“ Bienvenue sur HelepMoney ! partagez vos infos de paiement sur toute les plateformes numÃ©riques ğŸ’°monetisez vos sites web ,liens et groupe whatsapp  en toute sÃ©curitÃ©, encaisser facilement â˜ï¸infoline : what's et ayoba 670035609  ! </span>
  </div>

<h1><b>HelepMoney</b></h1>
<input type="text" id="searchAbonne" placeholder="Rechercher un abonnÃ©...">
<ul id="abonneList"></ul>

<div id="abonneDetail" class="hidden">
<h3 id="abonneNom"></h3>
<p><b>Entreprise :</b> <span id="abonneEntreprise"></span></p>
<p><b>PropriÃ©taire :</b> <span id="abonneProprietaire"></span></p>
<p><b>NumÃ©ros :</b> <span id="abonneComptes"></span></p>
<textarea id="messagePaiement" rows="4" placeholder="Collez le message Mobile Money"></textarea>
<button id="validerPaiement">Valider le paiement</button>
<p id="msgPaiement"></p>
<button id="retourAdmin">Retour Administration</button>
</div>
</div>

<script>
const ADMIN_CODE = "233233";

// 20 abonnÃ©s avec OM et MoMo, certains fermÃ©s
const abonnÃ©s = [
  {id:"A001", entreprise:"Boutique Alpha", proprietaire:"Jean Dupont", numeros:{om:"690112233", momo:"677889900"}, ouvert:true, transactions:[]},
  {id:"A002", entreprise:"MaÃ§onnerie BTP", proprietaire:"Kegni IsmaÃ«l", numeros:{om:"656207273", momo:"674556677"}, ouvert:true, transactions:[]},
  {id:"A003", entreprise:" ras", proprietaire:"Mengue Emmanuel", numeros:{om:"655667566", momo:"ras"}, ouvert:true, transactions:[]}, 
  {id:"A004", entreprise:"Pharmacie Centrale", proprietaire:"Alice Ndongo", numeros:{om:"691223344", momo:"675443322"}, ouvert:true, transactions:[]},
  {id:"A005", entreprise:"Taxi Express", proprietaire:"Serge Kameni", numeros:{om:"692334455", momo:"676554433"}, ouvert:true, transactions:[]},
  {id:"A006", entreprise:"Boulangerie Pain Chaud", proprietaire:"Marie Claire", numeros:{om:"693445566", momo:"679112233"}, ouvert:false, transactions:[]}, 
  {id:"A007", entreprise:"Station Service Petro", proprietaire:"Didier Etame", numeros:{om:"694556677", momo:"674221100"}, ouvert:true, transactions:[]},
  {id:"A008", entreprise:"Garage AutoFix", proprietaire:"Patrick Nguema", numeros:{om:"695667788", momo:"678334455"}, ouvert:true, transactions:[]},
  {id:"A009", entreprise:"Coiffure Divine", proprietaire:"Linda Mvondo", numeros:{om:"696778899", momo:"679445566"}, ouvert:true, transactions:[]},
  {id:"A010", entreprise:"Boutique Informatique", proprietaire:"Albert Ngono", numeros:{om:"697889900", momo:"674998877"}, ouvert:true, transactions:[]},
  {id:"A011", entreprise:"Restaurant Le Festin", proprietaire:"Nathalie Ebong", numeros:{om:"698990011", momo:"677223344"}, ouvert:true, transactions:[]},
  {id:"A012", entreprise:"Librairie Savoir", proprietaire:"Fabrice Talla", numeros:{om:"699001122", momo:"678556677"}, ouvert:true, transactions:[]},
  {id:"A013", entreprise:"FastFood King", proprietaire:"Brice Tchoumi", numeros:{om:"690223344", momo:"676667788"}, ouvert:true, transactions:[]},
  {id:"A014", entreprise:"Cyber CafÃ© Connect", proprietaire:"Samuel Kouassi", numeros:{om:"691334455", momo:"677778899"}, ouvert:true, transactions:[]},
  {id:"A015", entreprise:"Boutique Mode", proprietaire:"Sylvie Mbarga", numeros:{om:"692445566", momo:"674889900"}, ouvert:true, transactions:[]},
  {id:"A016", entreprise:"Ã‰lectro Service", proprietaire:"Thomas Ekane", numeros:{om:"693556677", momo:"679990011"}, ouvert:true, transactions:[]},
  {id:"A017", entreprise:"Salon BeautÃ© Luxe", proprietaire:"Chantal Ngo", numeros:{om:"694667788", momo:"675112233"}, ouvert:true, transactions:[]},
  {id:"A018", entreprise:"Boucherie Viande FraÃ®che", proprietaire:"AndrÃ© Biyaga", numeros:{om:"695778899", momo:"678221133"}, ouvert:true, transactions:[]},
  {id:"A019", entreprise:"Snack Bar Chill", proprietaire:"Victor Essono", numeros:{om:"696889900", momo:"679334455"}, ouvert:true, transactions:[]},
  {id:"A020", entreprise:"Pressing Propre", proprietaire:"Odile Nana", numeros:{om:"697990011", momo:"674556600"}, ouvert:true, transactions:[]},
   {id:"A021", entreprise:"aucune", proprietaire:"loveline kinyuy wirnkar", numeros:{om:"697990011", momo:"676353859"}, ouvert:true, transactions:[]}
];

const adminSection = document.getElementById("adminSection");
const userSection = document.getElementById("userSection");
const adminTable = document.getElementById("adminTable");
const accessBtn = document.getElementById("accessBtn");
const adminCodeInput = document.getElementById("adminCode");
const accessMsg = document.getElementById("accessMsg");
const searchAbonne = document.getElementById("searchAbonne");
const abonneList = document.getElementById("abonneList");
const abonneDetail = document.getElementById("abonneDetail");
const abonneNom = document.getElementById("abonneNom");
const abonneEntreprise = document.getElementById("abonneEntreprise");
const abonneProprietaire = document.getElementById("abonneProprietaire");
const abonneComptes = document.getElementById("abonneComptes");
const messagePaiement = document.getElementById("messagePaiement");
const validerPaiement = document.getElementById("validerPaiement");
const msgPaiement = document.getElementById("msgPaiement");
const retourAdmin = document.getElementById("retourAdmin");

// Admin Table
function updateAdminTable(){
  adminTable.innerHTML = "";
  abonnÃ©s.forEach(a => {
    const lien = `?abonne=${a.id}`;
    const btnEtat = a.ouvert ? 'Ouvert' : 'FermÃ©';
    const lienHTML = a.ouvert 
      ? `<a href="${lien}">Voir</a>` 
      : `<span style="color:gray;cursor:not-allowed;">Voir</span>`;
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${a.entreprise}</td>
      <td>${a.proprietaire}</td>
      <td>OM:${a.numeros.om} | MoMo:${a.numeros.momo}</td>
      <td>${lienHTML}</td>
      <td>${btnEtat}</td>
    `;
    adminTable.appendChild(tr);
  });
}

// AccÃ¨s admin
accessBtn.addEventListener("click", ()=>{
  if(adminCodeInput.value.trim() === ADMIN_CODE){ accessMsg.textContent="âœ… AccÃ¨s autorisÃ©"; updateAdminTable(); } 
  else { accessMsg.textContent="âŒ Code incorrect"; }
});

// Afficher abonnÃ©
function showAbonne(a){
  if(!a.ouvert) return; // abonnÃ© fermÃ©, ne rien faire
  abonneDetail.classList.remove("hidden");
  abonneNom.textContent = a.proprietaire;
  abonneEntreprise.textContent = a.entreprise;
  abonneProprietaire.textContent = a.proprietaire;
  abonneComptes.textContent = `OM:${a.numeros.om} | MoMo:${a.numeros.momo}`;
  abonneNom.dataset.id = a.id;
  messagePaiement.value = "";
  msgPaiement.textContent = "";
  adminSection.classList.add("hidden");
  userSection.classList.remove("hidden");
}

// Recherche
searchAbonne.addEventListener("input", ()=>{
  const val = searchAbonne.value.toLowerCase();
  abonneList.innerHTML = "";
  abonnÃ©s.filter(a => a.proprietaire.toLowerCase().includes(val) || a.entreprise.toLowerCase().includes(val))
          .forEach(a => {
            if(a.ouvert){
              const li = document.createElement("li");
              li.textContent = `${a.proprietaire} (${a.entreprise})`;
              li.addEventListener("click", ()=> showAbonne(a));
              abonneList.appendChild(li);
            }
          });
});

// Validation paiement
validerPaiement.addEventListener("click", ()=>{
  const message = messagePaiement.value.trim();
  if(!message){ msgPaiement.textContent="Veuillez coller le message MoMo."; return; }
  const ab = abonnÃ©s.find(a => a.id === abonneNom.dataset.id);
  if(!ab){ msgPaiement.textContent="AbonnÃ© introuvable."; return; }
  if(!message.toLowerCase().includes(ab.proprietaire.toLowerCase()) || (!message.includes(ab.numeros.om) && !message.includes(ab.numeros.momo))){
    msgPaiement.textContent="Le paiement ne correspond pas Ã  cet abonnÃ©."; return;
  }
  msgPaiement.textContent=`âœ… Paiement validÃ© pour ${ab.proprietaire}`;
  messagePaiement.value = "";
});

// Retour admin
retourAdmin.addEventListener("click", ()=>{
  userSection.classList.add("hidden");
  adminSection.classList.remove("hidden");
  abonneDetail.classList.add("hidden");
});

// Ouvrir via URL
window.addEventListener("load", ()=>{
  const params = new URLSearchParams(window.location.search);
  const idAbonne = params.get("abonne");
  if(idAbonne){
    const ab = abonnÃ©s.find(a => a.id === idAbonne);
    if(ab && ab.ouvert) showAbonne(ab);
  }
});
</script>
</body>
</html>