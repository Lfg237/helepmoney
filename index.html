<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’š HelepMoney</title>
<style>
  
body{margin:0;font-family:'Poppins',sans-serif;background:#0b0f19;color:#f1f5f9;display:flex;justify-content:center;padding:20px;}
.container{background:#141b2e;padding:20px;border-radius:20px;width:95%;max-width:800px;box-shadow:0 0 20px rgba(0,0,0,0.5);}
header{display:flex;align-items:center;gap:10px;margin-bottom:15px;}
header img{width:40px;height:40px;}
input,select,button,textarea{padding:10px;margin:5px;border-radius:8px;border:none;outline:none;font-size:14px;width:100%;}
textarea{resize:none;}
button{background:linear-gradient(90deg,#2563eb,#10b981);color:#fff;font-weight:bold;cursor:pointer;transition:0.3s;}
button:hover{opacity:0.9;transform:scale(0.98);}
.info,.valid{margin-top:15px;padding:10px;border-radius:10px;text-align:left;}
.info{background:#1f2937;}
.valid{background:#10b98133;color:#10b981;}
.hidden{display:none;}
#profile-pic{width:100px;height:100px;border-radius:50%;margin-bottom:10px;display:block;margin-left:auto;margin-right:auto;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th,td{padding:8px;text-align:left;border-bottom:1px solid #333;}
#accounts-list{margin-top:10px;max-height:200px;overflow-y:auto;background:#1f2937;padding:10px;border-radius:10px;}
#accounts-list div{padding:5px;cursor:pointer;border-bottom:1px solid #333;}
#accounts-list div:hover{background:#2563eb33;}
#ads-display div{padding:5px;margin:5px 0;background:#2563eb33;border-radius:5px;}
</style>
</head>
<body>
<div class="container">
<header>
<img src="https://raw.githubusercontent.com/Lfg237/images-Lesfacilitateurs-/main/file_00000000def061f99f722813d5358de9.png" alt="HelepMoney">
<h2>ğŸ’š HelepMoney</h2>
</header>
ğŸ’ COMPTE MARCHAND GRATUIT ğŸ²
rÃ©colte des fonds en ligne 
<!-- HOME -->
<div id="home-section">
<button id="btn-create">â• CrÃ©er un compte</button>
<button id="btn-admin">ğŸ› ï¸ Admin</button>
<button id="btn-toggle-list">ğŸ“‹ Liste des comptes</button>
<div id="accounts-list" class="hidden"></div>
<div class="valid" id="home-msg" style="display:none;"></div>
</div>

<!-- CREATE ACCOUNT -->
<div id="create-section" class="hidden">
<h3>CrÃ©er un nouveau compte</h3>
<input type="text" id="new-name" placeholder="Nom">
<input type="text" id="new-phone" placeholder="NumÃ©ro mobile">
<input type="text" id="new-company" placeholder="Entreprise">
<input type="text" id="new-services" placeholder="Prestations">
<h4>BÃ©nÃ©ficiaires</h4>
<div id="beneficiaries-list"></div>
<input type="text" id="benef-name" placeholder="Nom bÃ©nÃ©ficiaire">
<input type="text" id="benef-phone" placeholder="NumÃ©ro bÃ©nÃ©ficiaire">
<select id="benef-type">
<option value="momo">Momo</option>
<option value="om">Orange Money</option>
</select>
<button id="btn-add-benef">â• Ajouter bÃ©nÃ©ficiaire</button>
<hr>
<button id="btn-create-account">ğŸ’¾ CrÃ©er</button>
<button id="btn-back1">ğŸ  Retour</button>
<div class="valid" id="create-msg" style="display:none;"></div>
</div>

<!-- USER SECTION -->
<div id="user-section" class="hidden">
<img id="profile-pic" src="https://raw.githubusercontent.com/Lfg237/images-Lesfacilitateurs-/main/file_00000000def061f99f722813d5358de9.png" alt="Photo de profil">
<input type="file" id="upload-file">
<button id="btn-upload">ğŸ“¤ Modifier ma photo</button>

<div class="info">
Nom : <span id="user-name"></span><br>
NumÃ©ro : <span id="user-phone"></span><br>
Entreprise : <span id="user-company"></span><br>
Prestations : <span id="user-services"></span><br>
ID : <span id="user-id"></span>
</div>

<h3>BÃ©nÃ©ficiaires</h3>
<div id="user-beneficiaries"></div>

<button id="btn-edit-toggle">âœï¸ Modifier mon compte</button>
<div id="edit-form" class="hidden">
<input type="text" id="edit-name" placeholder="Nom">
<input type="text" id="edit-phone" placeholder="NumÃ©ro mobile">
<input type="text" id="edit-company" placeholder="Entreprise">
<input type="text" id="edit-services" placeholder="Prestations">
<h4>Ajouter bÃ©nÃ©ficiaire</h4>
<input type="text" id="edit-benef-name" placeholder="Nom bÃ©nÃ©ficiaire">
<input type="text" id="edit-benef-phone" placeholder="NumÃ©ro bÃ©nÃ©ficiaire">
<select id="edit-benef-type">
<option value="momo">Momo</option>
<option value="om">Orange Money</option>
</select>
<button id="btn-add-edit-benef">â• Ajouter bÃ©nÃ©ficiaire</button>
</div>

<hr>
<h3>ğŸ’¸ VÃ©rification Paiement Mobile Money</h3>
<label>
<input type="radio" name="verifyMode" value="auto" checked> ğŸ”„ Mode automatique
</label>
<label>
<input type="radio" name="verifyMode" value="manual"> âœï¸ Mode manuel
</label>

<div id="manual-input">
<select id="beneficiary"></select>
<textarea id="message" rows="4" placeholder="Collez ici le message Mobile Money reÃ§u"></textarea>
</div>
<button id="btn-verify">âœ… VÃ©rifier le paiement</button>
<div class="valid" id="payment-status" style="display:none;"></div>

<button id="btn-share">ğŸ”— Copier le lien de ma page</button>
<div class="valid" id="share-status" style="display:none;"></div>

<hr>
<h3>ğŸ¬ Bande-annonce</h3>
<div id="ads-display"></div>

<hr>
<button id="btn-back-home">ğŸ  Retour Ã  l'accueil</button>
</div>

<!-- ADMIN SECTION -->
<div id="admin-section" class="hidden">
<button id="btn-back-home2">ğŸ  Retour Ã  l'accueil</button>
<h3>ğŸ“‹ Tableau Administrateur</h3>
<table>
<thead><tr><th>Nom</th><th>NumÃ©ro</th><th>Entreprise</th><th>Prestations</th><th>BloquÃ©</th><th>Actions</th></tr></thead>
<tbody id="users-table"></tbody>
</table>

<h3>ğŸ¬ Bande-annonce publicitaire</h3>
<input type="text" id="ad-text" placeholder="Ã‰crire une annonce">
<button id="btn-add-ad">â• Ajouter annonce</button>
<table>
<thead><tr><th>Annonce</th><th>Actions</th></tr></thead>
<tbody id="ads-table"></tbody>
</table>
</div>

<script>
// LOCAL STORAGE LOGIC
let users = JSON.parse(localStorage.getItem("helepmoney_users")) || [];
let userData = null;
let benefList = [];

// ADS
let ads = JSON.parse(localStorage.getItem("helepmoney_ads")) || [];

// CHECK URL PARAM FOR AUTO OPEN USER PAGE
const params = new URLSearchParams(window.location.search);
const abonneID = params.get("abonne");
if(abonneID){
  userData = users.find(u=>u.id==abonneID);
  if(userData) showSection("user");
}

// NAVIGATION
function showSection(sec){
["home","create","user","admin"].forEach(s=>document.getElementById(s+"-section").classList.add("hidden"));
document.getElementById(sec+"-section").classList.remove("hidden");
displayUserInfo();
loadUsersTable();
loadAdsTable();
displayAds();
}
document.getElementById("btn-create").onclick = ()=> {showSection("create"); benefList=[]; updateBenefList();};
document.getElementById("btn-back1").onclick = ()=> showSection("home");
document.getElementById("btn-back-home").onclick = ()=> showSection("home");
document.getElementById("btn-back-home2").onclick = ()=> showSection("home");
document.getElementById("btn-admin").onclick = ()=> {
  const code = prompt("Code Admin:");
  if(code==="233233") showSection("admin");
  else alert("âŒ Code incorrect");
};

// CREATE ACCOUNT
document.getElementById("btn-add-benef").onclick = ()=>{
const n=document.getElementById("benef-name").value.trim();
const p=document.getElementById("benef-phone").value.trim();
const t=document.getElementById("benef-type").value;
if(!n||!p){alert("Nom et numÃ©ro obligatoires"); return;}
benefList.push({name:n,phone:p,type:t});
updateBenefList();
document.getElementById("benef-name").value="";
document.getElementById("benef-phone").value="";
};
function updateBenefList(){
const div=document.getElementById("beneficiaries-list");
div.innerHTML="";
benefList.forEach(b=>{const el=document.createElement("div"); el.textContent=`${b.name} - ${b.phone} (${b.type})`; div.appendChild(el);});
}

document.getElementById("btn-create-account").onclick = ()=>{
const name=document.getElementById("new-name").value.trim();
const phone=document.getElementById("new-phone").value.trim();
const company=document.getElementById("new-company").value.trim();
const services=document.getElementById("new-services").value.trim();
if(!name||!phone){alert("Nom et numÃ©ro obligatoires"); return;}
userData={id:Date.now(), name, phone, company, services, beneficiaries:benefList, blocked:false};
users.push(userData);
localStorage.setItem("helepmoney_users", JSON.stringify(users));
alert("âœ… Compte crÃ©Ã© !");
showSection("user");
displayUserInfo();
updateBeneficiarySelect();
};

// DISPLAY USER INFO
function displayUserInfo(){
if(!userData) return;
document.getElementById("user-name").textContent=userData.name;
document.getElementById("user-phone").textContent=userData.phone;
document.getElementById("user-company").textContent=userData.company||"-";
document.getElementById("user-services").textContent=userData.services||"-";
document.getElementById("user-id").textContent=userData.id;
const div=document.getElementById("user-beneficiaries"); div.innerHTML="";
userData.beneficiaries.forEach(b=>{const el=document.createElement("div"); el.textContent=`${b.name} - ${b.phone} (${b.type})`; div.appendChild(el);});
updateBeneficiarySelect();
}

// EDIT USER
document.getElementById("btn-edit-toggle").onclick = ()=>{
document.getElementById("edit-form").classList.toggle("hidden");
document.getElementById("edit-name").value=userData.name;
document.getElementById("edit-phone").value=userData.phone;
document.getElementById("edit-company").value=userData.company;
document.getElementById("edit-services").value=userData.services;
};
document.getElementById("btn-add-edit-benef").onclick = ()=>{
const n=document.getElementById("edit-benef-name").value.trim();
const p=document.getElementById("edit-benef-phone").value.trim();
const t=document.getElementById("edit-benef-type").value;
if(!n||!p){alert("Nom et numÃ©ro obligatoires !"); return;}
userData.beneficiaries.push({name:n,phone:p,type:t}); displayUserInfo();
document.getElementById("edit-benef-name").value=""; document.getElementById("edit-benef-phone").value="";
};

// SHARE LINK
document.getElementById("btn-share").onclick = ()=>{
const link = `${window.location.origin}?abonne=${userData.id}`;
navigator.clipboard.writeText(link).then(()=>{document.getElementById("share-status").textContent="Lien copiÃ© ğŸ”—: "+link; document.getElementById("share-status").style.display="block";});
};

// VERIFY PAYMENT MANUEL + AUTOMATIQUE
function updateBeneficiarySelect(){
const sel=document.getElementById("beneficiary"); sel.innerHTML="";
if(userData && userData.beneficiaries){
userData.beneficiaries.forEach(b=>{const opt=document.createElement("option"); opt.value=b.phone; opt.textContent=`${b.name} - ${b.phone} (${b.type})`; sel.appendChild(opt);});
}
}

// ADMIN TABLEAU
function loadUsersTable(){
const table=document.getElementById("users-table");
table.innerHTML="";
users.forEach(u=>{
const tr=document.createElement("tr");
tr.innerHTML=`<td>${u.name}</td><td>${u.phone}</td><td>${u.company||'-'}</td><td>${u.services||'-'}</td><td>${u.blocked?'âœ…':'âŒ'}</td>
<td><button onclick="toggleBlock(${u.id})">${u.blocked?'DÃ©bloquer':'Bloquer'}</button><button onclick="deleteUser(${u.id})">Supprimer</button></td>`;
table.appendChild(tr);
});
}
window.toggleBlock = (id)=>{
users.forEach(u=>{if(u.id===id) u.blocked=!u.blocked;});
localStorage.setItem("helepmoney_users", JSON.stringify(users));
loadUsersTable();
};
window.deleteUser = (id)=>{
if(!confirm("Confirmer suppression ?")) return;
users=users.filter(u=>u.id!==id);
localStorage.setItem("helepmoney_users", JSON.stringify(users));
loadUsersTable();
};

// TOGGLE LISTE DES COMPTES
const btnToggle = document.getElementById("btn-toggle-list");
const accountsDiv = document.getElementById("accounts-list");
function updateAccountsList(){
  accountsDiv.innerHTML = "";
  users.forEach(u=>{
    const div = document.createElement("div");
    div.textContent = u.name + " - " + u.phone;
    div.onclick = ()=> {
      userData = u;
      localStorage.setItem("helepmoney_user", JSON.stringify(userData));
      showSection("user");
    };
    accountsDiv.appendChild(div);
  });
}
btnToggle.onclick = ()=>{
  if(accountsDiv.classList.contains("hidden")){
    updateAccountsList();
    accountsDiv.classList.remove("hidden");
  } else {
    accountsDiv.classList.add("hidden");
  }
};

// -----------------------
// ADS LOGIC
// -----------------------
function loadAdsTable() {
  const table = document.getElementById("ads-table");
  table.innerHTML = "";
  ads.forEach((ad, index) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${ad}</td>
    <td>
      <button onclick="editAd(${index})">âœï¸ Modifier</button>
      <button onclick="deleteAd(${index})">âŒ Supprimer</button>
    </td>`;
    table.appendChild(tr);
  });
}
document.getElementById("btn-add-ad").onclick = ()=>{
  const text = document.getElementById("ad-text").value.trim();
  if(!text){alert("Ã‰crire une annonce"); return;}
  ads.push(text);
  localStorage.setItem("helepmoney_ads", JSON.stringify(ads));
  document.getElementById("ad-text").value="";
  loadAdsTable();
  displayAds();
};
window.editAd = (index)=>{
  const newText = prompt("Modifier l'annonce:", ads[index]);
  if(newText){
    ads[index] = newText;
    localStorage.setItem("helepmoney_ads", JSON.stringify(ads));
    loadAdsTable();
    displayAds();
  }
};
window.deleteAd = (index)=>{
  if(!confirm("Confirmer suppression ?")) return;
  ads.splice(index,1);
  localStorage.setItem("helepmoney_ads", JSON.stringify(ads));
  loadAdsTable();
  displayAds();
};
function displayAds(){
  const div = document.getElementById("ads-display");
  div.innerHTML = "";
  ads.forEach(ad=>{
    const el = document.createElement("div");
    el.textContent = ad;
    div.appendChild(el);
  });
}

// -----------------------
// LOAD INIT
displayAds();
loadAdsTable();
</script>
</div>
</body>
</html>
